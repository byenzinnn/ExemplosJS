<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <link href="https://fonts.googleapis.com/icon?family=Material+Icons+Sharp" rel="stylesheet">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-T3c6CoIi6uLrA9TneNEoa7RxnatzjcDSCmG1MXxSR1GAsXEV/Dwwykc2MPK8M2HN" crossorigin="anonymous">
    <link href="https://fonts.googleapis.com/css2?family=Gabarito&display=swap" rel="stylesheet">
    <link rel="stylesheet"
        href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@24,400,0,0" />

    <link rel="stylesheet" href="assets/css/estilo.css">
    <link rel="stylesheet" href="assets/js/index.js">

    <title>Jogo da Forca</title>

</head>

<body>
    <div class="jogo container">
        <h1>Jogo da Forca</h1>
        <p id="word-display"></p>
        <p id="error-count">Erros restantes: 3</p>
        <input type="text" id="guess-input" class="input" name="text">
        <button onclick="guessLetter()">Enviar</button>
    </div>

    <script>
        // Lista de palavras
        const palavras = ["javascript", "programacao", "desenvolvimento", "forca", "openai", "gpt", "html", "css"];

        let palavraAtual = "";
        let palavraEscondida = [];
        let errosRestantes = 3;
        let pontos = 0;
        let contAlert = 0;

        // Inicializa o jogo
        function iniciarJogo() {
            // Seleciona uma palavra aleatória do vetor
            palavraAtual = palavras.pop().toLowerCase();

            // Inicializa a palavra escondida
            palavraEscondida = Array(palavraAtual.length).fill('_');

            // Atualiza a exibição da palavra
            atualizarExibicao();

            // Reinicia o contador de erros
            errosRestantes = 3;
            atualizarErrosRestantes();
        }

        // Atualiza a exibição da palavra
        function atualizarExibicao() {
            document.getElementById('word-display').innerText = palavraEscondida.join(' ');
        }

        // Atualiza o contador de erros restantes
        function atualizarErrosRestantes() {
            document.getElementById('error-count').innerText = `Erros restantes: ${errosRestantes}`;
        }

        // Verifica se a letra está na palavra
        function verificarLetra(letra) {
            letra = letra.toLowerCase();
            if (palavraAtual.includes(letra)) {
                // A letra está na palavra
                for (let i = 0; i < palavraAtual.length; i++) {
                    if (palavraAtual[i] === letra) {
                        palavraEscondida[i] = letra;
                    }
                }
                atualizarExibicao();

                // Verifica se todas as letras foram adivinhadas
                if (!palavraEscondida.includes('_')) {
                    // O jogador ganhou
                    alert(`Parabéns! Você acertou a palavra. Pontuação: ${pontos + 100}`);
                    pontos += 100;
                    if (pontos >= 200 && pontos < 400 && contAlert == 0) {
                        alert("Você é bom nisso!");
                        contAlert = 1;
                    } else
                    if(pontos >= 800 && contAlert == 1){
                        alert("Você é muito bom!");
                        contAlert = 0;
                    }
                    iniciarJogo();
                }
            } else {
                // A letra não está na palavra
                errosRestantes--;
                atualizarErrosRestantes();

                // Verifica se o jogador perdeu
                if (errosRestantes === 0) {
                    pontos -= 50;
                    alert(`Game Over! A palavra era: ${palavraAtual}. Pontuação: ${pontos}`);
                    iniciarJogo();
                }
            }
        }

        // Função chamada quando o jogador clica no botão "Enviar"
        function guessLetter() {
            const inputElement = document.getElementById('guess-input');
            const letra = inputElement.value.trim();

            if (letra.length === 1 && letra.match(/[a-z]/i)) {
                // A entrada é uma única letra
                verificarLetra(letra);
            } else {
                alert('Por favor, digite uma única letra válida.');
            }

            // Limpa o campo de entrada
            inputElement.value = '';
        }

        // Inicia o jogo quando a página carrega
        window.onload = iniciarJogo;


    </script>
</body>

</html>